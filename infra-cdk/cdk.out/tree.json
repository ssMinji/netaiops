{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.238.0"},"children":{"NetAIOpsInfraStack":{"id":"NetAIOpsInfraStack","path":"NetAIOpsInfraStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"Module5":{"id":"Module5","path":"NetAIOpsInfraStack/Module5","constructInfo":{"fqn":"aws-cdk-lib.NestedStack","version":"2.238.0"},"children":{"Cognito":{"id":"Cognito","path":"NetAIOpsInfraStack/Module5/Cognito","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"AgentAuth":{"id":"AgentAuth","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"UserPool":{"id":"UserPool","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","mfaConfiguration":"OFF","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"usernameConfiguration":{"caseSensitive":false},"userPoolName":"K8sAgentPool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ResourceServer":{"id":"ResourceServer","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/ResourceServer","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolResourceServer","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/ResourceServer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolResourceServer","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolResourceServer","aws:cdk:cloudformation:props":{"identifier":"netops-a2a-server","name":"netops-a2a-server","scopes":[{"scopeName":"gateway:read","scopeDescription":"Read access"},{"scopeName":"gateway:write","scopeDescription":"Write access"},{"scopeName":"invoke","scopeDescription":"Invoke K8s agent runtime"}],"userPoolId":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}}}},"MachineClient":{"id":"MachineClient","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/MachineClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/MachineClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["client_credentials"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":[{"Fn::Join":["",[{"Ref":"CognitoAgentAuthUserPoolResourceServerB4EBAB0D"},"/gateway:read"]]},{"Fn::Join":["",[{"Ref":"CognitoAgentAuthUserPoolResourceServerB4EBAB0D"},"/gateway:write"]]},{"Fn::Join":["",[{"Ref":"CognitoAgentAuthUserPoolResourceServerB4EBAB0D"},"/invoke"]]}],"clientName":"K8sMachineClient","generateSecret":true,"idTokenValidity":60,"refreshTokenValidity":1440,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}}}},"WebClient":{"id":"WebClient","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid","email","profile",{"Fn::Join":["",[{"Ref":"CognitoAgentAuthUserPoolResourceServerB4EBAB0D"},"/gateway:read"]]},{"Fn::Join":["",[{"Ref":"CognitoAgentAuthUserPoolResourceServerB4EBAB0D"},"/gateway:write"]]},{"Fn::Join":["",[{"Ref":"CognitoAgentAuthUserPoolResourceServerB4EBAB0D"},"/invoke"]]}],"callbackUrLs":["http://localhost:8501/","https://example.com/auth/callback"],"clientName":"K8sWebClient","generateSecret":false,"idTokenValidity":60,"logoutUrLs":["http://localhost:8501/"],"refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}}}},"Domain":{"id":"Domain","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/Domain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserPool/Domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":{"Fn::Join":["",["k8sagent-",{"Ref":"AWS::AccountId"}]]},"userPoolId":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"groupName":"admin","precedence":1,"userPoolId":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}},"UserGroup":{"id":"UserGroup","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/UserGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"groupName":"user","precedence":2,"userPoolId":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}},"Param-userpool_id":{"id":"Param-userpool_id","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-userpool_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-userpool_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/userpool_id","type":"String","value":{"Ref":"CognitoAgentAuthUserPool79DB0993"}}}}}},"Param-machine_client_id":{"id":"Param-machine_client_id","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-machine_client_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-machine_client_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/machine_client_id","type":"String","value":{"Ref":"CognitoAgentAuthUserPoolMachineClient981BAE25"}}}}}},"Param-cognito_discovery_url":{"id":"Param-cognito_discovery_url","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_discovery_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_discovery_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/cognito_discovery_url","type":"String","value":{"Fn::Join":["",["https://cognito-idp.",{"Ref":"AWS::Region"},".amazonaws.com/",{"Ref":"CognitoAgentAuthUserPool79DB0993"},"/.well-known/openid-configuration"]]}}}}}},"Param-cognito_token_url":{"id":"Param-cognito_token_url","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_token_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_token_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/cognito_token_url","type":"String","value":{"Fn::Join":["",["https://k8sagent-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com/oauth2/token"]]}}}}}},"Param-cognito_auth_url":{"id":"Param-cognito_auth_url","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_auth_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_auth_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/cognito_auth_url","type":"String","value":{"Fn::Join":["",["https://k8sagent-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com/oauth2/authorize"]]}}}}}},"Param-cognito_domain":{"id":"Param-cognito_domain","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_domain","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/cognito_domain","type":"String","value":{"Fn::Join":["",["https://k8sagent-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com"]]}}}}}},"Param-cognito_auth_scope":{"id":"Param-cognito_auth_scope","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_auth_scope","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_auth_scope/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/cognito_auth_scope","type":"String","value":"netops-a2a-server/gateway:read netops-a2a-server/gateway:write netops-a2a-server/invoke"}}}}},"Param-web_client_id":{"id":"Param-web_client_id","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-web_client_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-web_client_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/web_client_id","type":"String","value":{"Ref":"CognitoAgentAuthUserPoolWebClient6DB119B9"}}}}}},"Param-cognito_provider":{"id":"Param-cognito_provider","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_provider","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-cognito_provider/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/cognito_provider","type":"String","value":{"Fn::Join":["",["k8sagent-",{"Ref":"AWS::AccountId"}]]}}}}}},"Param-machine_client_secret":{"id":"Param-machine_client_secret","path":"NetAIOpsInfraStack/Module5/Cognito/AgentAuth/Param-machine_client_secret","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/machine_client_secret","type":"String","value":{"Ref":"CognitoAgentAuthUserPoolMachineClient981BAE25"}}}}}},"RuntimeAuth":{"id":"RuntimeAuth","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"UserPool":{"id":"UserPool","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","mfaConfiguration":"OFF","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"usernameConfiguration":{"caseSensitive":false},"userPoolName":"EksMcpServerPool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ResourceServer":{"id":"ResourceServer","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/ResourceServer","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolResourceServer","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/ResourceServer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolResourceServer","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolResourceServer","aws:cdk:cloudformation:props":{"identifier":"eks-mcp-server","name":"eks-mcp-server","scopes":[{"scopeName":"invoke","scopeDescription":"Invoke EKS MCP Server"}],"userPoolId":{"Ref":"CognitoRuntimeAuthUserPool211F04C3"}}}}}},"MachineClient":{"id":"MachineClient","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/MachineClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/MachineClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["client_credentials"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":[{"Fn::Join":["",[{"Ref":"CognitoRuntimeAuthUserPoolResourceServer0A03E06C"},"/invoke"]]}],"clientName":"EksMcpServerClient","generateSecret":true,"idTokenValidity":60,"refreshTokenValidity":1440,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"CognitoRuntimeAuthUserPool211F04C3"}}}}}},"Domain":{"id":"Domain","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/Domain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserPool/Domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":{"Fn::Join":["",["eks-mcp-",{"Ref":"AWS::AccountId"}]]},"userPoolId":{"Ref":"CognitoRuntimeAuthUserPool211F04C3"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"groupName":"admin","precedence":1,"userPoolId":{"Ref":"CognitoRuntimeAuthUserPool211F04C3"}}}},"UserGroup":{"id":"UserGroup","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/UserGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"groupName":"user","precedence":2,"userPoolId":{"Ref":"CognitoRuntimeAuthUserPool211F04C3"}}}},"Param-eks_mcp_userpool_id":{"id":"Param-eks_mcp_userpool_id","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_userpool_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_userpool_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_userpool_id","type":"String","value":{"Ref":"CognitoRuntimeAuthUserPool211F04C3"}}}}}},"Param-eks_mcp_machine_client_id":{"id":"Param-eks_mcp_machine_client_id","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_machine_client_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_machine_client_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_machine_client_id","type":"String","value":{"Ref":"CognitoRuntimeAuthUserPoolMachineClient1E3AD85F"}}}}}},"Param-eks_mcp_cognito_discovery_url":{"id":"Param-eks_mcp_cognito_discovery_url","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_discovery_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_discovery_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_cognito_discovery_url","type":"String","value":{"Fn::Join":["",["https://cognito-idp.",{"Ref":"AWS::Region"},".amazonaws.com/",{"Ref":"CognitoRuntimeAuthUserPool211F04C3"},"/.well-known/openid-configuration"]]}}}}}},"Param-eks_mcp_cognito_token_url":{"id":"Param-eks_mcp_cognito_token_url","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_token_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_token_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_cognito_token_url","type":"String","value":{"Fn::Join":["",["https://eks-mcp-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com/oauth2/token"]]}}}}}},"Param-eks_mcp_cognito_auth_url":{"id":"Param-eks_mcp_cognito_auth_url","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_auth_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_auth_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_cognito_auth_url","type":"String","value":{"Fn::Join":["",["https://eks-mcp-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com/oauth2/authorize"]]}}}}}},"Param-eks_mcp_cognito_domain":{"id":"Param-eks_mcp_cognito_domain","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_domain","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_cognito_domain","type":"String","value":{"Fn::Join":["",["https://eks-mcp-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com"]]}}}}}},"Param-eks_mcp_cognito_auth_scope":{"id":"Param-eks_mcp_cognito_auth_scope","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_auth_scope","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_auth_scope/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_cognito_auth_scope","type":"String","value":"eks-mcp-server/invoke"}}}}},"Param-eks_mcp_cognito_provider":{"id":"Param-eks_mcp_cognito_provider","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_provider","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_cognito_provider/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_cognito_provider","type":"String","value":{"Fn::Join":["",["eks-mcp-",{"Ref":"AWS::AccountId"}]]}}}}}},"Param-eks_mcp_machine_client_secret":{"id":"Param-eks_mcp_machine_client_secret","path":"NetAIOpsInfraStack/Module5/Cognito/RuntimeAuth/Param-eks_mcp_machine_client_secret","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/eks_mcp_machine_client_secret","type":"String","value":{"Ref":"CognitoRuntimeAuthUserPoolMachineClient1E3AD85F"}}}}}},"ExecutionRole":{"id":"ExecutionRole","path":"NetAIOpsInfraStack/Module5/Cognito/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["bedrock-agentcore.amazonaws.com","lambda.amazonaws.com"]}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"netaiops-m5-gateway-execution-role"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NetAIOpsInfraStack/Module5/Cognito/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"*","Sid":"ECR"},{"Action":["bedrock-agentcore-control:*","bedrock-agentcore:*"],"Effect":"Allow","Resource":"*","Sid":"BedrockAgentCore"},{"Action":["bedrock:GetFoundationModel","bedrock:GetInferenceProfile","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:ListFoundationModels","bedrock:ListInferenceProfiles"],"Effect":"Allow","Resource":["arn:aws:bedrock:*::foundation-model/*",{"Fn::Join":["",["arn:aws:bedrock:*:",{"Ref":"AWS::AccountId"},":inference-profile/*"]]}],"Sid":"BedrockModels"},{"Action":["eks:AccessKubernetesApi","eks:DescribeAddon","eks:DescribeCluster","eks:DescribeFargateProfile","eks:DescribeInsight","eks:DescribeNodegroup","eks:DescribeUpdate","eks:ListAddons","eks:ListClusters","eks:ListFargateProfiles","eks:ListInsights","eks:ListNodegroups","eks:ListUpdates"],"Effect":"Allow","Resource":"*","Sid":"EKSReadOnly"},{"Action":["cloudwatch:DescribeAlarms","cloudwatch:GetMetricData","cloudwatch:GetMetricStatistics","cloudwatch:ListMetrics","logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:FilterLogEvents","logs:GetLogEvents","logs:GetQueryResults","logs:PutLogEvents","logs:StartQuery","logs:StopQuery"],"Effect":"Allow","Resource":"*","Sid":"CloudWatchLogsMetrics"},{"Action":["ec2:DescribeAvailabilityZones","ec2:DescribeNetworkAcls","ec2:DescribeNetworkInterfaces","ec2:DescribeRouteTables","ec2:DescribeSecurityGroups","ec2:DescribeSubnets","ec2:DescribeVpcs"],"Effect":"Allow","Resource":"*","Sid":"EC2VPC"},{"Action":["iam:CreateServiceLinkedRole","iam:GetPolicy","iam:GetPolicyVersion","iam:GetRole","iam:GetRolePolicy","iam:ListAttachedRolePolicies","iam:ListRolePolicies","iam:PassRole"],"Effect":"Allow","Resource":"*","Sid":"IAM"},{"Action":["ssm:GetParameter","ssm:GetParameters","ssm:GetParametersByPath","ssm:PutParameter"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/a2a/app/k8s/*"]]},"Sid":"SSM"},{"Action":["cloudformation:DescribeStackResources","cloudformation:DescribeStacks","cloudformation:ListStacks"],"Effect":"Allow","Resource":"*","Sid":"CloudFormation"},{"Action":["kms:Decrypt","kms:DescribeKey","secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":"*","Sid":"SecretsKMS"},{"Action":["xray:GetSamplingRules","xray:GetSamplingTargets","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*","Sid":"XRay"},{"Action":"bedrock-agentcore-memory:*","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:bedrock-agentcore:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":memory/*"]]},"Sid":"Memory"}],"Version":"2012-10-17"},"policyName":"CognitoExecutionRoleDefaultPolicy507D9598","roles":[{"Ref":"CognitoExecutionRoleF6227C07"}]}}}}}}},"ExecutionRoleParam":{"id":"ExecutionRoleParam","path":"NetAIOpsInfraStack/Module5/Cognito/ExecutionRoleParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Cognito/ExecutionRoleParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/gateway_iam_role","type":"String","value":{"Fn::GetAtt":["CognitoExecutionRoleF6227C07","Arn"]}}}}}}}},"Gateway":{"id":"Gateway","path":"NetAIOpsInfraStack/Module5/Gateway","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"OAuth2Provider":{"id":"OAuth2Provider","path":"NetAIOpsInfraStack/Module5/Gateway/OAuth2Provider","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Provider":{"id":"Provider","path":"NetAIOpsInfraStack/Module5/Gateway/OAuth2Provider/Provider","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"Gateway":{"id":"Gateway","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Gateway":{"id":"Gateway","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/Gateway","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"Target-EksMcpServer":{"id":"Target-EksMcpServer","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/Target-EksMcpServer","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"GatewayIdParam":{"id":"GatewayIdParam","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayIdParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayIdParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/gateway_id","type":"String","value":{"Fn::GetAtt":["GatewayD4406D74","GatewayId"]}}}}}},"GatewayNameParam":{"id":"GatewayNameParam","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayNameParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayNameParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/gateway_name","type":"String","value":"k8s-diagnostics-gateway"}}}}},"GatewayArnParam":{"id":"GatewayArnParam","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayArnParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayArnParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/gateway_arn","type":"String","value":{"Fn::GetAtt":["GatewayD4406D74","GatewayArn"]}}}}}},"GatewayUrlParam":{"id":"GatewayUrlParam","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayUrlParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Gateway/Gateway/GatewayUrlParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/gateway_url","type":"String","value":{"Fn::GetAtt":["GatewayD4406D74","GatewayUrl"]}}}}}}}}}},"SsmParameterValue:--a2a--app--k8s--agentcore--eks_mcp_server_arn:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--a2a--app--k8s--agentcore--eks_mcp_server_arn:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"NetAIOpsInfraStack/Module5/SsmParameterValue:--a2a--app--k8s--agentcore--eks_mcp_server_arn:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"SsmParameterValue:--a2a--app--k8s--agentcore--eks_mcp_server_arn:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--a2a--app--k8s--agentcore--eks_mcp_server_arn:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"NetAIOpsInfraStack/Module5/SsmParameterValue:--a2a--app--k8s--agentcore--eks_mcp_server_arn:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.238.0"}},"Runtime":{"id":"Runtime","path":"NetAIOpsInfraStack/Module5/Runtime","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Runtime":{"id":"Runtime","path":"NetAIOpsInfraStack/Module5/Runtime/Runtime","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"RuntimeArnParam":{"id":"RuntimeArnParam","path":"NetAIOpsInfraStack/Module5/Runtime/RuntimeArnParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Runtime/RuntimeArnParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/runtime_arn","type":"String","value":{"Fn::GetAtt":["Runtime33C31BF9","RuntimeArn"]}}}}}},"RuntimeNameParam":{"id":"RuntimeNameParam","path":"NetAIOpsInfraStack/Module5/Runtime/RuntimeNameParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module5/Runtime/RuntimeNameParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/a2a/app/k8s/agentcore/runtime_name","type":"String","value":"a2a_k8s_agent_runtime"}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"NetAIOpsInfraStack/Module5/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Default":{"id":"Default","path":"NetAIOpsInfraStack/Module5/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}}}},"Module5.NestedStack":{"id":"Module5.NestedStack","path":"NetAIOpsInfraStack/Module5.NestedStack","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Module5.NestedStackResource":{"id":"Module5.NestedStackResource","path":"NetAIOpsInfraStack/Module5.NestedStack/Module5.NestedStackResource","constructInfo":{"fqn":"aws-cdk-lib.CfnStack","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFormation::Stack","aws:cdk:cloudformation:props":{"templateUrl":{"Fn::Join":["",["https://s3.us-east-1.",{"Ref":"AWS::URLSuffix"},"/cdk-hnb659fds-assets-175678592674-us-east-1/98232fc6cc931ed14ac8f80b26d2ea97507f4cb9b158fa3aa03afae8c963ccd2.json"]]}}}}}},"Module6":{"id":"Module6","path":"NetAIOpsInfraStack/Module6","constructInfo":{"fqn":"aws-cdk-lib.NestedStack","version":"2.238.0"},"children":{"Cognito":{"id":"Cognito","path":"NetAIOpsInfraStack/Module6/Cognito","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Auth":{"id":"Auth","path":"NetAIOpsInfraStack/Module6/Cognito/Auth","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"UserPool":{"id":"UserPool","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","mfaConfiguration":"OFF","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"usernameConfiguration":{"caseSensitive":false},"userPoolName":"IncidentAnalysisPool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ResourceServer":{"id":"ResourceServer","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/ResourceServer","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolResourceServer","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/ResourceServer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolResourceServer","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolResourceServer","aws:cdk:cloudformation:props":{"identifier":"incident-resource-server","name":"incident-resource-server","scopes":[{"scopeName":"invoke","scopeDescription":"Invoke Incident Analysis agent runtime"}],"userPoolId":{"Ref":"CognitoAuthUserPoolF3109634"}}}}}},"MachineClient":{"id":"MachineClient","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/MachineClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/MachineClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["client_credentials"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":[{"Fn::Join":["",[{"Ref":"CognitoAuthUserPoolResourceServerC459EC4E"},"/invoke"]]}],"clientName":"IncidentAnalysisMachineClient","generateSecret":true,"idTokenValidity":60,"refreshTokenValidity":1440,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"CognitoAuthUserPoolF3109634"}}}}}},"WebClient":{"id":"WebClient","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid","email","profile",{"Fn::Join":["",[{"Ref":"CognitoAuthUserPoolResourceServerC459EC4E"},"/invoke"]]}],"callbackUrLs":["http://localhost:8502/","https://example.com/auth/callback"],"clientName":"IncidentAnalysisWebClient","generateSecret":false,"idTokenValidity":60,"logoutUrLs":["http://localhost:8502/"],"refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"CognitoAuthUserPoolF3109634"}}}}}},"Domain":{"id":"Domain","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/Domain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserPool/Domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":{"Fn::Join":["",["incident-analysis-",{"Ref":"AWS::AccountId"}]]},"userPoolId":{"Ref":"CognitoAuthUserPoolF3109634"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"groupName":"admin","precedence":1,"userPoolId":{"Ref":"CognitoAuthUserPoolF3109634"}}}},"UserGroup":{"id":"UserGroup","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/UserGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"groupName":"user","precedence":2,"userPoolId":{"Ref":"CognitoAuthUserPoolF3109634"}}}},"Param-userpool_id":{"id":"Param-userpool_id","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-userpool_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-userpool_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/userpool_id","type":"String","value":{"Ref":"CognitoAuthUserPoolF3109634"}}}}}},"Param-machine_client_id":{"id":"Param-machine_client_id","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-machine_client_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-machine_client_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/machine_client_id","type":"String","value":{"Ref":"CognitoAuthUserPoolMachineClient59D678FA"}}}}}},"Param-cognito_discovery_url":{"id":"Param-cognito_discovery_url","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_discovery_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_discovery_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/cognito_discovery_url","type":"String","value":{"Fn::Join":["",["https://cognito-idp.",{"Ref":"AWS::Region"},".amazonaws.com/",{"Ref":"CognitoAuthUserPoolF3109634"},"/.well-known/openid-configuration"]]}}}}}},"Param-cognito_token_url":{"id":"Param-cognito_token_url","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_token_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_token_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/cognito_token_url","type":"String","value":{"Fn::Join":["",["https://incident-analysis-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com/oauth2/token"]]}}}}}},"Param-cognito_auth_url":{"id":"Param-cognito_auth_url","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_auth_url","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_auth_url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/cognito_auth_url","type":"String","value":{"Fn::Join":["",["https://incident-analysis-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com/oauth2/authorize"]]}}}}}},"Param-cognito_domain":{"id":"Param-cognito_domain","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_domain","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_domain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/cognito_domain","type":"String","value":{"Fn::Join":["",["https://incident-analysis-",{"Ref":"AWS::AccountId"},".auth.",{"Ref":"AWS::Region"},".amazoncognito.com"]]}}}}}},"Param-cognito_auth_scope":{"id":"Param-cognito_auth_scope","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_auth_scope","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_auth_scope/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/cognito_auth_scope","type":"String","value":"incident-resource-server/invoke"}}}}},"Param-web_client_id":{"id":"Param-web_client_id","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-web_client_id","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-web_client_id/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/web_client_id","type":"String","value":{"Ref":"CognitoAuthUserPoolWebClient2044EECF"}}}}}},"Param-cognito_provider":{"id":"Param-cognito_provider","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_provider","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-cognito_provider/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/cognito_provider","type":"String","value":{"Fn::Join":["",["incident-analysis-",{"Ref":"AWS::AccountId"}]]}}}}}},"Param-machine_client_secret":{"id":"Param-machine_client_secret","path":"NetAIOpsInfraStack/Module6/Cognito/Auth/Param-machine_client_secret","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/machine_client_secret","type":"String","value":{"Ref":"CognitoAuthUserPoolMachineClient59D678FA"}}}}}},"ExecutionRole":{"id":"ExecutionRole","path":"NetAIOpsInfraStack/Module6/Cognito/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["bedrock-agentcore.amazonaws.com","lambda.amazonaws.com"]}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"incident-gateway-execution-role"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NetAIOpsInfraStack/Module6/Cognito/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock-agentcore-control:CreateGateway","bedrock-agentcore-control:CreateOAuth2CredentialProvider","bedrock-agentcore-control:CreateRuntime","bedrock-agentcore-control:DeleteGateway","bedrock-agentcore-control:DeleteOAuth2CredentialProvider","bedrock-agentcore-control:DeleteRuntime","bedrock-agentcore-control:GetGateway","bedrock-agentcore-control:GetOAuth2CredentialProvider","bedrock-agentcore-control:GetRuntime","bedrock-agentcore-control:ListGateways","bedrock-agentcore-control:ListOAuth2CredentialProviders","bedrock-agentcore-control:ListRuntimes","bedrock-agentcore-control:UpdateGateway","bedrock-agentcore-control:UpdateOAuth2CredentialProvider","bedrock-agentcore-control:UpdateRuntime","bedrock-agentcore:CreateMemory","bedrock-agentcore:DeleteMemory","bedrock-agentcore:GetMemory","bedrock-agentcore:GetResourceOauth2Token","bedrock-agentcore:InvokeRuntime","bedrock-agentcore:ListMemories","bedrock-agentcore:UpdateMemory","cloudwatch:DescribeAlarms","cloudwatch:GetDashboard","cloudwatch:GetMetricData","cloudwatch:GetMetricStatistics","cloudwatch:ListDashboards","cloudwatch:ListMetrics","ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetAuthorizationToken","ecr:GetDownloadUrlForLayer","es:DescribeElasticsearchDomains","es:ESHttpDelete","es:ESHttpGet","es:ESHttpHead","es:ESHttpPost","es:ESHttpPut","es:ListDomainNames","logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:FilterLogEvents","logs:GetLogEvents","logs:GetLogGroupFields","logs:GetQueryResults","logs:PutLogEvents","logs:StartQuery","logs:StopQuery","xray:GetSamplingRules","xray:GetSamplingTargets","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["lambda:GetFunction","lambda:InvokeFunction","lambda:ListFunctions"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:lambda:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":function:incident-*"]]},{"Fn::Join":["",["arn:aws:lambda:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":function:netops-*"]]}]},{"Action":["ssm:GetParameter","ssm:GetParameters","ssm:GetParametersByPath","ssm:PutParameter"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/app/incident/*"]]},{"Fn::Join":["",["arn:aws:ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/app/netops/*"]]}]},{"Action":["iam:CreateServiceLinkedRole","iam:GetRole","iam:GetRolePolicy","iam:ListAttachedRolePolicies","iam:ListRolePolicies","iam:PassRole"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:iam::",{"Ref":"AWS::AccountId"},":role/aws-service-role/*"]]},{"Fn::Join":["",["arn:aws:iam::",{"Ref":"AWS::AccountId"},":role/incident-gateway-execution-role"]]}]},{"Action":["bedrock-agentcore-memory:CreateMemory","bedrock-agentcore-memory:DeleteMemory","bedrock-agentcore-memory:DeleteMemoryData","bedrock-agentcore-memory:GetMemory","bedrock-agentcore-memory:GetMemoryData","bedrock-agentcore-memory:ListMemories","bedrock-agentcore-memory:PutMemoryData","bedrock-agentcore-memory:UpdateMemory","bedrock-agentcore:CreateEvent","bedrock-agentcore:DeleteEvent","bedrock-agentcore:GetEvent","bedrock-agentcore:ListEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:bedrock-agentcore:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":memory/IncidentAnalysisAgentMemory*"]]},{"Fn::Join":["",["arn:aws:bedrock-agentcore:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":memory/IncidentAnalysisAgentMemory*/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey","kms:GenerateDataKey","secretsmanager:DescribeSecret","secretsmanager:GetSecretValue","secretsmanager:ListSecrets"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:kms:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":key/*"]]},{"Fn::Join":["",["arn:aws:secretsmanager:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":secret:*"]]}]},{"Action":["bedrock:GetFoundationModel","bedrock:GetInferenceProfile","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:ListFoundationModels","bedrock:ListInferenceProfiles"],"Effect":"Allow","Resource":["arn:aws:bedrock:*::foundation-model/*",{"Fn::Join":["",["arn:aws:bedrock:*:",{"Ref":"AWS::AccountId"},":inference-profile/*"]]}]}],"Version":"2012-10-17"},"policyName":"CognitoExecutionRoleDefaultPolicy507D9598","roles":[{"Ref":"CognitoExecutionRoleF6227C07"}]}}}}}}},"ExecutionRoleParam":{"id":"ExecutionRoleParam","path":"NetAIOpsInfraStack/Module6/Cognito/ExecutionRoleParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/ExecutionRoleParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/gateway_iam_role","type":"String","value":{"Fn::GetAtt":["CognitoExecutionRoleF6227C07","Arn"]}}}}}},"LambdaRole":{"id":"LambdaRole","path":"NetAIOpsInfraStack/Module6/Cognito/LambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/LambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":["bedrock-agentcore.amazonaws.com","lambda.amazonaws.com"]}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"incident-tools-lambda-role"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NetAIOpsInfraStack/Module6/Cognito/LambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Cognito/LambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cloudwatch:DescribeAlarms","cloudwatch:DescribeAlarmsForMetric","cloudwatch:GetMetricData","cloudwatch:GetMetricStatistics","cloudwatch:ListMetrics","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:DescribeQueries","logs:FilterLogEvents","logs:GetLogEvents","logs:GetQueryResults","logs:StartQuery","logs:StopQuery"],"Effect":"Allow","Resource":"*","Sid":"CloudWatchReadForContainerInsight"},{"Action":["es:ESHttpDelete","es:ESHttpGet","es:ESHttpHead","es:ESHttpPatch","es:ESHttpPost","es:ESHttpPut"],"Effect":"Allow","Resource":"*","Sid":"OpenSearchAccess"},{"Action":["ssm:GetParameter","ssm:GetParameters"],"Effect":"Allow","Resource":"arn:aws:ssm:*:*:parameter/app/incident/*","Sid":"SSMParameterAccess"},{"Action":["eks:DescribeCluster","eks:ListClusters"],"Effect":"Allow","Resource":"*","Sid":"EKSAccessForChaosLambda"},{"Action":"sts:GetCallerIdentity","Effect":"Allow","Resource":"*","Sid":"STSForEKSAuth"}],"Version":"2012-10-17"},"policyName":"CognitoLambdaRoleDefaultPolicy80A303F7","roles":[{"Ref":"CognitoLambdaRoleD35B0D4A"}]}}}}}}}}},"Lambdas":{"id":"Lambdas","path":"NetAIOpsInfraStack/Module6/Lambdas","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Datadog":{"id":"Datadog","path":"NetAIOpsInfraStack/Module6/Lambdas/Datadog","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Function":{"id":"Function","path":"NetAIOpsInfraStack/Module6/Lambdas/Datadog/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.238.0"},"children":{"AssetImage":{"id":"AssetImage","path":"NetAIOpsInfraStack/Module6/Lambdas/Datadog/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.238.0"},"children":{"Staging":{"id":"Staging","path":"NetAIOpsInfraStack/Module6/Lambdas/Datadog/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Repository":{"id":"Repository","path":"NetAIOpsInfraStack/Module6/Lambdas/Datadog/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Datadog/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"175678592674.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-175678592674-us-east-1:50ce69547f733f375697d5e2aa72b6071fbe833bdcdacdf4b1744e3dc19261cb"}},"description":"Incident Analysis - Datadog metrics, events, traces, monitors","environment":{"variables":{"DATADOG_SITE":"us5.datadoghq.com"}},"functionName":"incident-datadog-tools","memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["CognitoLambdaRoleD35B0D4A","Arn"]},"timeout":300}}}}}}},"OpenSearch":{"id":"OpenSearch","path":"NetAIOpsInfraStack/Module6/Lambdas/OpenSearch","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Function":{"id":"Function","path":"NetAIOpsInfraStack/Module6/Lambdas/OpenSearch/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.238.0"},"children":{"AssetImage":{"id":"AssetImage","path":"NetAIOpsInfraStack/Module6/Lambdas/OpenSearch/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.238.0"},"children":{"Staging":{"id":"Staging","path":"NetAIOpsInfraStack/Module6/Lambdas/OpenSearch/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Repository":{"id":"Repository","path":"NetAIOpsInfraStack/Module6/Lambdas/OpenSearch/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/OpenSearch/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"175678592674.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-175678592674-us-east-1:fbd47267b8355c72beda8646995a27492e18cd6bb5038b0ad7afa41e06223d6f"}},"description":"Incident Analysis - OpenSearch log search, anomaly detection","environment":{"variables":{"AWS_REGION_NAME":"us-east-1"}},"functionName":"incident-opensearch-tools","memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["CognitoLambdaRoleD35B0D4A","Arn"]},"timeout":300}}}}}}},"ContainerInsight":{"id":"ContainerInsight","path":"NetAIOpsInfraStack/Module6/Lambdas/ContainerInsight","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Function":{"id":"Function","path":"NetAIOpsInfraStack/Module6/Lambdas/ContainerInsight/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.238.0"},"children":{"AssetImage":{"id":"AssetImage","path":"NetAIOpsInfraStack/Module6/Lambdas/ContainerInsight/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.238.0"},"children":{"Staging":{"id":"Staging","path":"NetAIOpsInfraStack/Module6/Lambdas/ContainerInsight/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Repository":{"id":"Repository","path":"NetAIOpsInfraStack/Module6/Lambdas/ContainerInsight/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/ContainerInsight/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"175678592674.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-175678592674-us-east-1:da8bb1fb9cd71024176ce82d1aedc603f224775e1050949723e6dc6c45f1fa86"}},"description":"Incident Analysis - EKS Container Insights pod/node/cluster metrics","functionName":"incident-container-insight-tools","memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["CognitoLambdaRoleD35B0D4A","Arn"]},"timeout":300}}}}}}},"Chaos":{"id":"Chaos","path":"NetAIOpsInfraStack/Module6/Lambdas/Chaos","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Function":{"id":"Function","path":"NetAIOpsInfraStack/Module6/Lambdas/Chaos/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.238.0"},"children":{"AssetImage":{"id":"AssetImage","path":"NetAIOpsInfraStack/Module6/Lambdas/Chaos/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.238.0"},"children":{"Staging":{"id":"Staging","path":"NetAIOpsInfraStack/Module6/Lambdas/Chaos/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Repository":{"id":"Repository","path":"NetAIOpsInfraStack/Module6/Lambdas/Chaos/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Chaos/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"175678592674.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-175678592674-us-east-1:5452dec774e99b8e313ea600117cb1a744a4ce9f2a254aa6660d174a661d4385"}},"description":"Incident Analysis - Chaos engineering for EKS incident injection","environment":{"variables":{"EKS_CLUSTER_NAME":"netaiops-eks-cluster","EKS_CLUSTER_REGION":"us-west-2"}},"functionName":"incident-chaos-tools","memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["CognitoLambdaRoleD35B0D4A","Arn"]},"timeout":300}}}}}}},"AlarmTrigger":{"id":"AlarmTrigger","path":"NetAIOpsInfraStack/Module6/Lambdas/AlarmTrigger","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Function":{"id":"Function","path":"NetAIOpsInfraStack/Module6/Lambdas/AlarmTrigger/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.238.0"},"children":{"AssetImage":{"id":"AssetImage","path":"NetAIOpsInfraStack/Module6/Lambdas/AlarmTrigger/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.238.0"},"children":{"Staging":{"id":"Staging","path":"NetAIOpsInfraStack/Module6/Lambdas/AlarmTrigger/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Repository":{"id":"Repository","path":"NetAIOpsInfraStack/Module6/Lambdas/AlarmTrigger/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/AlarmTrigger/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"175678592674.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-175678592674-us-east-1:83de8d69289e0fb3fe35ec8f3bff0dcc2e06a8a6ad84eb29869814c29eb94d6f"}},"description":"Incident Analysis - SNS alarm handler that triggers agent runtime","environment":{"variables":{"AGENT_REGION":"us-east-1"}},"functionName":"incident-alarm-trigger","memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["CognitoLambdaRoleD35B0D4A","Arn"]},"timeout":300}}}}}}},"GitHub":{"id":"GitHub","path":"NetAIOpsInfraStack/Module6/Lambdas/GitHub","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Function":{"id":"Function","path":"NetAIOpsInfraStack/Module6/Lambdas/GitHub/Function","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.238.0"},"children":{"AssetImage":{"id":"AssetImage","path":"NetAIOpsInfraStack/Module6/Lambdas/GitHub/Function/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.238.0"},"children":{"Staging":{"id":"Staging","path":"NetAIOpsInfraStack/Module6/Lambdas/GitHub/Function/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Repository":{"id":"Repository","path":"NetAIOpsInfraStack/Module6/Lambdas/GitHub/Function/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/GitHub/Function/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"175678592674.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-175678592674-us-east-1:665e1f04d72bf49fad8e0dd1744fc01961387fe09dfe063f4c01b22c6bb596cd"}},"description":"Incident Analysis - GitHub issue creation and management","environment":{"variables":{"AGENT_REGION":"us-east-1"}},"functionName":"incident-github-tools","memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["CognitoLambdaRoleD35B0D4A","Arn"]},"timeout":300}}}}}}},"Param-datadog_lambda_arn":{"id":"Param-datadog_lambda_arn","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-datadog_lambda_arn","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-datadog_lambda_arn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/datadog_lambda_arn","type":"String","value":{"Fn::GetAtt":["LambdasDatadogFunction361874F0","Arn"]}}}}}},"Param-opensearch_lambda_arn":{"id":"Param-opensearch_lambda_arn","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-opensearch_lambda_arn","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-opensearch_lambda_arn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/opensearch_lambda_arn","type":"String","value":{"Fn::GetAtt":["LambdasOpenSearchFunctionA26DA9A7","Arn"]}}}}}},"Param-container_insight_lambda_arn":{"id":"Param-container_insight_lambda_arn","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-container_insight_lambda_arn","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-container_insight_lambda_arn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/container_insight_lambda_arn","type":"String","value":{"Fn::GetAtt":["LambdasContainerInsightFunction0164A2B7","Arn"]}}}}}},"Param-chaos_lambda_arn":{"id":"Param-chaos_lambda_arn","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-chaos_lambda_arn","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-chaos_lambda_arn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/chaos_lambda_arn","type":"String","value":{"Fn::GetAtt":["LambdasChaosFunction3D2464FC","Arn"]}}}}}},"Param-alarm_trigger_lambda_arn":{"id":"Param-alarm_trigger_lambda_arn","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-alarm_trigger_lambda_arn","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-alarm_trigger_lambda_arn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/alarm_trigger_lambda_arn","type":"String","value":{"Fn::GetAtt":["LambdasAlarmTriggerFunctionF72FAE0C","Arn"]}}}}}},"Param-github_lambda_arn":{"id":"Param-github_lambda_arn","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-github_lambda_arn","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Lambdas/Param-github_lambda_arn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/github_lambda_arn","type":"String","value":{"Fn::GetAtt":["LambdasGitHubFunctionF747E7FD","Arn"]}}}}}}}},"Gateway":{"id":"Gateway","path":"NetAIOpsInfraStack/Module6/Gateway","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Gateway":{"id":"Gateway","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Gateway":{"id":"Gateway","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/Gateway","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"Target-DatadogTools":{"id":"Target-DatadogTools","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/Target-DatadogTools","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"Target-OpenSearchTools":{"id":"Target-OpenSearchTools","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/Target-OpenSearchTools","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"Target-ContainerInsightTools":{"id":"Target-ContainerInsightTools","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/Target-ContainerInsightTools","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"GatewayIdParam":{"id":"GatewayIdParam","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayIdParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayIdParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/gateway_id","type":"String","value":{"Fn::GetAtt":["GatewayD4406D74","GatewayId"]}}}}}},"GatewayNameParam":{"id":"GatewayNameParam","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayNameParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayNameParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/gateway_name","type":"String","value":"incident-analysis-gateway"}}}}},"GatewayArnParam":{"id":"GatewayArnParam","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayArnParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayArnParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/gateway_arn","type":"String","value":{"Fn::GetAtt":["GatewayD4406D74","GatewayArn"]}}}}}},"GatewayUrlParam":{"id":"GatewayUrlParam","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayUrlParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Gateway/Gateway/GatewayUrlParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/gateway_url","type":"String","value":{"Fn::GetAtt":["GatewayD4406D74","GatewayUrl"]}}}}}}}}}},"Runtime":{"id":"Runtime","path":"NetAIOpsInfraStack/Module6/Runtime","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Runtime":{"id":"Runtime","path":"NetAIOpsInfraStack/Module6/Runtime/Runtime","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"RuntimeArnParam":{"id":"RuntimeArnParam","path":"NetAIOpsInfraStack/Module6/Runtime/RuntimeArnParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Runtime/RuntimeArnParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/runtime_arn","type":"String","value":{"Fn::GetAtt":["Runtime33C31BF9","RuntimeArn"]}}}}}},"RuntimeNameParam":{"id":"RuntimeNameParam","path":"NetAIOpsInfraStack/Module6/Runtime/RuntimeNameParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Runtime/RuntimeNameParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/runtime_name","type":"String","value":"incident_analysis_agent_runtime"}}}}}}},"Monitoring":{"id":"Monitoring","path":"NetAIOpsInfraStack/Module6/Monitoring","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Alarms":{"id":"Alarms","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Handler":{"id":"Handler","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Handler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.238.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Handler/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Handler/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Handler/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Handler/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cloudwatch:DeleteAlarms","cloudwatch:DescribeAlarms","cloudwatch:PutMetricAlarm","sns:CreateTopic","sns:DeleteTopic","sns:GetTopicAttributes","sns:ListSubscriptionsByTopic","sns:SetTopicAttributes","sns:Subscribe","sns:Unsubscribe"],"Effect":"Allow","Resource":"*"},{"Action":["lambda:AddPermission","lambda:RemovePermission"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LambdasAlarmTriggerFunctionF72FAE0C","Arn"]}}],"Version":"2012-10-17"},"policyName":"MonitoringAlarmsHandlerServiceRoleDefaultPolicyA4D0541E","roles":[{"Ref":"MonitoringAlarmsHandlerServiceRoleC86F8684"}]}}}}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Handler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\nimport json\nimport boto3\nimport time\n\ndef handler(event, context):\n    request_type = event['RequestType']\n    props = event['ResourceProperties']\n\n    alarm_region = props['AlarmRegion']\n    lambda_region = props['LambdaRegion']\n    sns_topic_name = props['SnsTopicName']\n    cluster_name = props['ClusterName']\n    alarm_trigger_lambda_arn = props['AlarmTriggerLambdaArn']\n    alarms = json.loads(props['Alarms'])\n    account_id = props['AccountId']\n\n    sns_client = boto3.client('sns', region_name=alarm_region)\n    cw_client = boto3.client('cloudwatch', region_name=alarm_region)\n    lambda_client = boto3.client('lambda', region_name=lambda_region)\n\n    if request_type == 'Create' or request_type == 'Update':\n        # Create SNS topic\n        topic_response = sns_client.create_topic(Name=sns_topic_name)\n        sns_topic_arn = topic_response['TopicArn']\n\n        # Set topic policy\n        policy = {\n            \"Version\": \"2012-10-17\",\n            \"Statement\": [{\n                \"Sid\": \"AllowCloudWatchAlarms\",\n                \"Effect\": \"Allow\",\n                \"Principal\": {\"Service\": \"cloudwatch.amazonaws.com\"},\n                \"Action\": \"SNS:Publish\",\n                \"Resource\": sns_topic_arn,\n                \"Condition\": {\n                    \"ArnLike\": {\n                        \"aws:SourceArn\": f\"arn:aws:cloudwatch:{alarm_region}:{account_id}:alarm:netaiops-*\"\n                    }\n                }\n            }]\n        }\n        sns_client.set_topic_attributes(\n            TopicArn=sns_topic_arn,\n            AttributeName='Policy',\n            AttributeValue=json.dumps(policy)\n        )\n\n        # Add Lambda invoke permission\n        try:\n            lambda_client.add_permission(\n                FunctionName=alarm_trigger_lambda_arn.split(':')[-1],\n                StatementId='sns-alarm-invoke',\n                Action='lambda:InvokeFunction',\n                Principal='sns.amazonaws.com',\n                SourceArn=sns_topic_arn,\n            )\n        except lambda_client.exceptions.ResourceConflictException:\n            pass  # Permission already exists\n\n        # Subscribe Lambda to SNS topic\n        sns_client.subscribe(\n            TopicArn=sns_topic_arn,\n            Protocol='lambda',\n            Endpoint=alarm_trigger_lambda_arn,\n        )\n\n        # Create CloudWatch alarms\n        for alarm in alarms:\n            cw_client.put_metric_alarm(\n                AlarmName=alarm['name'],\n                AlarmDescription=alarm['description'],\n                Namespace='ContainerInsights',\n                MetricName=alarm['metricName'],\n                Dimensions=[{'Name': 'ClusterName', 'Value': cluster_name}],\n                Statistic=alarm['statistic'],\n                Period=alarm['period'],\n                EvaluationPeriods=alarm['evaluationPeriods'],\n                DatapointsToAlarm=alarm['datapointsToAlarm'],\n                Threshold=alarm['threshold'],\n                ComparisonOperator=alarm['comparisonOperator'],\n                AlarmActions=[sns_topic_arn],\n                OKActions=[sns_topic_arn],\n                TreatMissingData='notBreaching',\n            )\n\n        return {\n            'PhysicalResourceId': sns_topic_arn,\n            'Data': {'SnsTopicArn': sns_topic_arn},\n        }\n\n    elif request_type == 'Delete':\n        sns_topic_arn = event.get('PhysicalResourceId', '')\n        if sns_topic_arn and sns_topic_arn.startswith('arn:aws:sns:'):\n            # Delete alarms\n            alarm_names = [a['name'] for a in alarms]\n            try:\n                cw_client.delete_alarms(AlarmNames=alarm_names)\n            except Exception as e:\n                print(f\"Error deleting alarms: {e}\")\n\n            # Remove Lambda permission\n            try:\n                lambda_client.remove_permission(\n                    FunctionName=alarm_trigger_lambda_arn.split(':')[-1],\n                    StatementId='sns-alarm-invoke',\n                )\n            except Exception as e:\n                print(f\"Error removing permission: {e}\")\n\n            # Delete SNS topic\n            try:\n                sns_client.delete_topic(TopicArn=sns_topic_arn)\n            except Exception as e:\n                print(f\"Error deleting topic: {e}\")\n\n        return {'PhysicalResourceId': sns_topic_arn or 'deleted'}\n"},"functionName":"netaiops-cross-region-alarm-cr","handler":"index.handler","role":{"Fn::GetAtt":["MonitoringAlarmsHandlerServiceRoleC86F8684","Arn"]},"runtime":"python3.11","timeout":300}}}}},"Provider":{"id":"Provider","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.Provider","version":"2.238.0"},"children":{"framework-onEvent":{"id":"framework-onEvent","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.238.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["MonitoringAlarmsHandler5CA8C266","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MonitoringAlarmsHandler5CA8C266","Arn"]},":*"]]}]},{"Action":"lambda:GetFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["MonitoringAlarmsHandler5CA8C266","Arn"]}}],"Version":"2012-10-17"},"policyName":"MonitoringAlarmsProviderframeworkonEventServiceRoleDefaultPolicy4F779F1A","roles":[{"Ref":"MonitoringAlarmsProviderframeworkonEventServiceRole60E4BAC5"}]}}}}}}},"Code":{"id":"Code","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.238.0"},"children":{"Stage":{"id":"Stage","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"AssetBucket":{"id":"AssetBucket","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.238.0"}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider/framework-onEvent/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-175678592674-us-east-1","s3Key":"07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"},"description":"AWS CDK resource provider framework - onEvent (NetAIOpsInfraStack/Module6/Monitoring/Alarms/Provider)","environment":{"variables":{"USER_ON_EVENT_FUNCTION_ARN":{"Fn::GetAtt":["MonitoringAlarmsHandler5CA8C266","Arn"]}}},"handler":"framework.onEvent","loggingConfig":{"logFormat":"JSON","applicationLogLevel":"FATAL"},"role":{"Fn::GetAtt":["MonitoringAlarmsProviderframeworkonEventServiceRole60E4BAC5","Arn"]},"runtime":"nodejs22.x","timeout":900}}}}}}},"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.238.0"},"children":{"Default":{"id":"Default","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"SnsTopicArnParam":{"id":"SnsTopicArnParam","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/SnsTopicArnParam","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"NetAIOpsInfraStack/Module6/Monitoring/Alarms/SnsTopicArnParam/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/app/incident/agentcore/sns_topic_arn","type":"String","value":{"Fn::GetAtt":["MonitoringAlarms66989066","SnsTopicArn"]}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"NetAIOpsInfraStack/Module6/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Default":{"id":"Default","path":"NetAIOpsInfraStack/Module6/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}}}},"Module6.NestedStack":{"id":"Module6.NestedStack","path":"NetAIOpsInfraStack/Module6.NestedStack","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Module6.NestedStackResource":{"id":"Module6.NestedStackResource","path":"NetAIOpsInfraStack/Module6.NestedStack/Module6.NestedStackResource","constructInfo":{"fqn":"aws-cdk-lib.CfnStack","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFormation::Stack","aws:cdk:cloudformation:props":{"templateUrl":{"Fn::Join":["",["https://s3.us-east-1.",{"Ref":"AWS::URLSuffix"},"/cdk-hnb659fds-assets-175678592674-us-east-1/326a7658369112657245d12ea21afc67877bbc371880710c5b7bda8027490a49.json"]]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"NetAIOpsInfraStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"},"children":{"Default":{"id":"Default","path":"NetAIOpsInfraStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"NetAIOpsInfraStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"NetAIOpsInfraStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.5.0"}}}}}